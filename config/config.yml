# åº”ç”¨æ¨¡å¼ï¼šreleaseã€debugï¼ˆé»˜è®¤releaseï¼‰
app_mode: release

# æœåŠ¡å™¨é…ç½®
server:
  # HTTPæœåŠ¡ç›‘å¬åœ°å€å’Œç«¯å£å· (æ ¼å¼: [IP]:PORT, ç¤ºä¾‹: :30103, 127.0.0.1:30103)
  listen_addr: :30103
  # è¯·æ±‚è¶…æ—¶æ—¶é—´
  timeout: 30s

# æ—¥å¿—é…ç½®
log:
  # æ—¥å¿—çº§åˆ«: debug, info, warn, error
  level: warn

# å…¨å±€é…ç½®é¡¹
global:
  # æ–‡ä»¶å­˜å‚¨ç›¸å…³é…ç½®
  storage:
    # è®¢é˜…æ–‡ä»¶å­˜å‚¨ä¸»ç›®å½•
    subscription_dir: ./subscriptions
  # ç”¨æˆ·æµé‡ç»Ÿè®¡ä¸åˆ°æœŸæ—¶é—´æ˜¾ç¤ºé…ç½®
  usage_display:
    # æ˜¯å¦åœ¨ä»£ç†åˆ†ç»„ä¸­æ˜¾ç¤ºç”¨æˆ·æµé‡å’Œåˆ°æœŸä¿¡æ¯
    enable: true
    # ä¿¡æ¯åˆ†ç»„åœ¨åˆ—è¡¨ä¸­çš„ä½ç½® (true: ç½®é¡¶æ˜¾ç¤º, false: æœ«å°¾æ˜¾ç¤º)
    prepend: false
    # æµé‡ä½¿ç”¨æƒ…å†µçš„æ˜¾ç¤ºæ¨¡æ¿ (æ”¯æŒå˜é‡: {{.used}} - å·²ç”¨æµé‡, {{.total}} - æ€»æµé‡)
    traffic_format: "â›½ å·²ç”¨æµé‡ {{.used}} / {{.total}}"
    # æµé‡æ˜¾ç¤ºå•ä½ (å¯é€‰: B, K, M, G, T)
    traffic_unit: "G"
    # é‡ç½®æ—¥æœŸçš„æ˜¾ç¤ºæ¨¡æ¿ (æ”¯æŒå˜é‡: {{.year}}-å¹´, {{.month}}-æœˆ, {{.day}}-æ—¥, {{.hour}}-æ—¶, {{.minute}}-åˆ†, {{.second}}-ç§’)
    expire_format: "ğŸ“… é‡ç½®æ—¥æœŸ {{.year}}-{{.month}}-{{.day}}"

# é»˜è®¤é…ç½®å‚æ•° (å„æœåŠ¡å•†å¯åœ¨ overrides ä¸­è¦†ç›–è¿™äº›è®¾ç½®)
defaults:
  # ç¼“å­˜ç­–ç•¥é…ç½®
  # ç¼“å­˜åˆ†ä¸ºä¸‰ä¸ªå±‚æ¬¡ï¼š
  # 1. file_ttl: è®¢é˜…æ–‡ä»¶çš„åŸå§‹å†…å®¹ç¼“å­˜
  # 2. api_ttl: æœåŠ¡å•† API è¿”å›æ•°æ®çš„ç¼“å­˜
  # 3. response_ttl: æœ€ç»ˆç”Ÿæˆçš„è®¢é˜…å†…å®¹ç¼“å­˜ï¼ˆåˆå¹¶äº†æ–‡ä»¶å†…å®¹å’Œ API æ•°æ®ï¼‰
  # æ‰€æœ‰ç¼“å­˜å‡æŒ‰è¯·æ±‚è·¯å¾„ï¼ˆpathï¼‰è¿›è¡Œå­˜å‚¨ï¼Œç›¸åŒè·¯å¾„çš„è¯·æ±‚ä¼šå¤ç”¨ç¼“å­˜å†…å®¹
  cache:
    # è®¢é˜…æ–‡ä»¶ç¼“å­˜æ—¶é—´ï¼Œ0è¡¨ç¤ºä¸ç¼“å­˜
    # æŒ‰è¯·æ±‚è·¯å¾„ç¼“å­˜ï¼Œæ–‡ä»¶å†…å®¹ç¼“å­˜åï¼Œä¿®æ”¹æ–‡ä»¶éœ€ç­‰å¾…ç¼“å­˜å¤±æ•ˆæ‰èƒ½ç”Ÿæ•ˆ
    file_ttl: 0

    # APIå“åº”ç¼“å­˜æ—¶é—´ï¼Œ0è¡¨ç¤ºä¸ç¼“å­˜
    # æŒ‰è¯·æ±‚è·¯å¾„ç¼“å­˜ï¼Œå»ºè®®å¼€å¯ä»¥é¿å…è§¦å‘æœåŠ¡å•†é™é€Ÿ
    # å¦‚æœé…ç½®äº† response_ttlï¼Œå¯ä»¥ä¸é…ç½®æ­¤é¡¹
    api_ttl: 0

    # æœ€ç»ˆå“åº”ç¼“å­˜æ—¶é—´ï¼Œ0è¡¨ç¤ºä¸ç¼“å­˜
    # æŒ‰è¯·æ±‚è·¯å¾„ç¼“å­˜æœ€ç»ˆçš„è®¢é˜…å†…å®¹ï¼ˆæ–‡ä»¶å†…å®¹ + APIå“åº”ç»“æœçš„ç»„åˆï¼‰
    response_ttl: 60s

  # æœåŠ¡å•†é€šç”¨å‚æ•°é…ç½®
  provider:
    # APIè¯·æ±‚è¶…æ—¶æ—¶é—´é™åˆ¶
    request_timeout: 10s
    # æ•°æ®æ›´æ–°é—´éš”
    update_interval: 24h

# VPSæœåŠ¡å•†é…ç½®åˆ—è¡¨
providers:
  # BandwagonHost æœåŠ¡é…ç½®
  bandwagonhost:
    # APIè·¯ç”±å‰ç¼€
    - route_prefix: "/route_prefix1"
      # APIå‡­è¯
      api_id: "VEID"
      api_key: "API KEY"
      # å…³è”çš„è®¢é˜…é…ç½®æ–‡ä»¶åˆ—è¡¨
      subscriptions:
        - "b1.yaml"
        - "b2.yaml"

    - route_prefix: "/route_prefix2"
      # APIå‡­è¯
      api_id: "VEID"
      api_key: "API KEY"
      # å…³è”çš„è®¢é˜…é…ç½®æ–‡ä»¶åˆ—è¡¨
      subscriptions:
        - "b3.yaml"
        - "b4.yaml"
      # å®ä¾‹ç‰¹å®šçš„é…ç½®è¦†ç›–
      overrides:
        cache:
          file_ttl: 30s
          api_ttl: 60s
          response_ttl: 0
        provider:
          request_timeout: 10s
          update_interval: 24h

  # RackNerd æœåŠ¡é…ç½®
  racknerd:
    - route_prefix: "/route_prefix3"
      api_id: "API Hash"
      api_key: "API Key"
      # å…³è”çš„è®¢é˜…é…ç½®æ–‡ä»¶åˆ—è¡¨
      subscriptions:
        - "rn.yaml"
